# 包
Go有一百多个标准库，使用 `Go Walker`查看，或者使用 `go list std`
- 包结构认识
- 包的使用基础
- 常用标准包详解
- 使用自定义包

# 一 包的基础
- 降低项目模块之间的耦合度，提高整体开发效率
- 避免冲突，引入命名空间
- 安全性：限制包成员的可见性提高软件的安全性。只允许用户通过特定的函数来访问和控制包内部的变量

Go编译速度快速
- 显示声明：所有导入包必须在每个文件的开头显示声明
- 无环依赖：禁止包的环状依赖，每个包被独立编译
- 无须遍历：目标文件记录包本身导出信息，记录包的依赖关系

## 1.1 包的结构
每个workspace必须由bin,pkg,src三个目录组成。
- bin：存放可执行文件
- pkg：存放编译好的库文件,主要是*.a文件
- src：存放Go语言的源文件
![1](.README_images/6c8bb5d7.png)

1. 工作空间
    - GOROOT：全局唯一变量，指定存放Go语言本身的目录路径
    - GOPATH：工作空间的变量，可有很多个
    - 通常使用第一个工作空间保存下载的第三方库，不管哪一个工作空间下载的包都可以在任意工作空间使用
2. 包的源文件
    - 一致使用package<name>语句进行声明
    - Go包由多个文件组成，文件名不需要与包名一致，包名小写字符，与所在目录，编译文件名无关
    - 可执行文件必须包含package main以及入口函数main
    - 变量命名大写，public。变量命名小写，internal
3. 包的声明
    主要用于源文件编译时能够为编译器指明哪些是包的源代码

## 1.2 包的导入
import "相对目录/包主文件名"
- 相对目录是指从/pkg/开始的子目录


1. 导入声明重命名
    - 注意：Go不允许导入不用，除非import _
    - 解决包名冲突，包名过长的问题
    ```go
    import "crypto/rand"    rand.function
    import R "crypto/rand"  重命名R R.function
    import . "crypto/rand"  简便模式 Function
    import _ "crypto/rand"  匿名导入 仅让该包执行初始化函数
    ```
2. 子包导入以及自定义路径导入包方式
[demo](./Demo/test.go)
3. 导入路径
    - 所有非标准库包的导入路径以所在组织的互联网域名为前缀
    ```go
        import(
            "golang.org/x/net/html"
            "github.com/go-sql-driver/mysql"
        )
    ```
4. 自定义路径
   - 对于企业自己搭建的私人GitLab仓库，需要告诉编译器这是一个包代码链接，三种方式实现：
        - 第一种:直接在包链接中加入VCS格式，目前支持![2](.README_images/61a72ee0.png)
        - 第二种：针对没有提供版本控制符的链接，go get 甚至不知道应该如何下载代码![3](.README_images/cf43038d.png)
        - 第三种：重定向网页链接![3](.README_images/d6b6b69a.png)
5. 匿名导入
    - 只是为了导入包的变量初始化和执行导入包的init初始化函数，_抑制编译错误

## 1.3 包的使用
[demo](./Demo/test.go)
- 在 $GOPATH$/src/下面创建自己的包：目录+目录下的文件
- 在 `go build` `go install` 安装这个包

## 1.4 Go语言工具箱
1. 包文档
    - 包的整体注释，写在package前的一个注释块，提供包的整体信息
    - go doc生成的关于包的页面上，相关信息一并显示 `godoc -http:8000`
2. 内部包
    - 对一些包公开，对一些包不可见，引入内部包internal
    - internal只在子目录可见，其他不可见
3. 查询包